<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.huawei.aitransform.mapper.DepartmentInfoMapper">

    <!-- 根据部门层级和部门名称查询部门信息 -->
    <select id="getDepartmentByLevelAndName" resultType="com.huawei.aitransform.entity.DepartmentInfoVO">
        SELECT 
            dept_code AS deptCode,
            dept_name AS deptName,
            dept_level AS deptLevel,
            parent_dept_code AS parentDeptCode
        FROM department_info_hrms
        WHERE dept_level = #{deptLevel}
        AND dept_name = #{deptName}
        LIMIT 1
    </select>

    <!-- 根据父部门编码查询所有子部门 -->
    <select id="getChildDepartments" resultType="com.huawei.aitransform.entity.DepartmentInfoVO">
        SELECT 
            dept_code AS deptCode,
            dept_name AS deptName,
            dept_level AS deptLevel,
            parent_dept_code AS parentDeptCode
        FROM department_info_hrms
        WHERE parent_dept_code = #{parentDeptCode}
        ORDER BY dept_code
    </select>

    <!-- 根据部门编码查询部门信息 -->
    <select id="getDepartmentByCode" resultType="com.huawei.aitransform.entity.DepartmentInfoVO" flushCache="true" useCache="false">
        SELECT 
            dept_code AS deptCode,
            dept_name AS deptName,
            dept_level AS deptLevel,
            parent_dept_code AS parentDeptCode
        FROM department_info_hrms
        WHERE dept_code = #{deptCode}
        ORDER BY dept_name DESC
        LIMIT 1
    </select>

</mapper>

